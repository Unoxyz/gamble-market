<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello Rack</title>
    <!-- <link rel="stylesheet" href="/css/application.css" charset="utf-8"> -->
  </head>
  <body>
    <form id="select_form" action="/chart" method="get">
      <select id="select_data" name="data">
        <option value="A" <%= 'selected' if request.params["data"] == 'A' %>>Good A</option>
        <option value="B" <%= 'selected' if request.params["data"] == 'B' %>>Good B</option>
      </select>
    </form>
    <br>
    <div>
      <p id="wtp" style="display: none;">
        <%= @data[:wtp].to_json %>
      </p>
      <p id="wta" style="display: none;">
        <%= @data[:wta].to_json %>
      </p>
    </div>
    <div style="width:80%; height:80%;">
      <canvas id="graph" style="border:1px solid #000000;"></canvas>
    </div>
    <script type="text/javascript" src="/js/application.js"></script>
    <script type="text/javascript">
      var select = document.getElementById('select_data');
      var form = document.getElementById('select_form');
      select.onchange = function () {
        form.submit();
      };
    </script>
  </body>
</html>
